# 研究室共用計算機でのPython使用について

## 概要
Pythonではpipを使うことで簡単に使用したいライブラリを追加することができますが、研究室の共用サーバーでPythonを使う場合にシステムのPythonに自由にライブラリを追加されてしまうと管理が難しくなります。  
このため、共用サーバーでPythonを使用する場合には[pyenv](https://github.com/yyuu/pyenv)を使用して各自ローカルにPython環境を整えてください。  
共用計算機に入っているPythonは古いバージョンなのですが、3系を使えるようになるのはもちろん2系で良いという場合もより最適化が進んでいるものを使用することができるというメリットもあります。

## インストール

### pyenvのインストール
各自のユーザーアカウントでstr33にログインします。
そしてホームディレクトリで  
```
$ git clone git://github.com/yyuu/pyenv.git ~/.pyenv
```
を実行します。

 そして、~/.bashrcに
 ```
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"
 ```
 と追記します。（bash以外に変えている人は各自対処）

ここまでできたらシェルを再起動します。
str33でこの作業を行うと、neumann、com02でも勝手に反映されます。（別にcom02でやっても同じですが）

### Pythonのインストール

```
$ pyenv install --list
```
とすると、その時点で使用可能なPythonのバージョン一覧が表示されます。このときpypyやjythonなどPythonの派生品も出てきますが、ただのPythonをインストールする場合は単にバージョン番号だけのものを使用します。  
2015/11/9時点で2系では2.7.10、3系では3.5.0が安定最新版でした。

インストールするべきバージョンがわかったら、
```
$ pyenv install 3.5.0     # 3.5.0の部分は各自読み替え
$ pyenv rehash
```
というように使用したいバージョンのPythonをインストールします。

### 使うPythonを指定する
LinuxではシステムのスクリプトがPythonのバージョンに依存していたりするので、PyenvでインストールしたPythonはグローバルで使用する設定にしないほうがよいです。
なので、各自作成したPythonプロジェクトのあるディレクトリで
```
$ pyenv local 3.5.0
```
として、そのディレクトリ内でPythonを実行した時だけpyenvでインストールしたPythonを使用するようにします。  
そのディレクトリ内でpipを利用してライブラリを追加したときもシステムのPythonではなくpyenvのPythonにライブラリが追加されます。（そもそもroot権限がなければシステムのpipは利用できませんが）

### 使用法
pyenv localで使用Pythonのバージョン指定をしたディレクトリ以下では自動的にPythonのバージョンが切り替わります。
念のため
```
python --version
```
で設定したとおりになっているか確かめられます。

## virtualenv
さらにライブラリをプロジェクトごとに管理したいといった場合はvirtualenvなどを使用してください。必要な場合は各自調べてください。
